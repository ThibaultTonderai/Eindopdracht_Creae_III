"use strict";function toggleButtonHexOrPic(){$("#btn_hex_pic").click(function(){removeInput(),toggleSubmit(!1),(hexOrPic=!hexOrPic)?($("#btn_hex_pic").addClass("input_button_pic").val("Picture"),$(divpic).show(),$(divhex).hide()):($("#btn_hex_pic").removeClass("input_button_pic").val("Hex"),$(divpic).hide(),$(divhex).show())})}function toggleButtonUrlOrFile(){$("#btn_url_file").click(function(){removeInput(),toggleSubmit(!1),(urlOrFile=!urlOrFile)?($("#btn_url_file").addClass("input_button_pic").val("File"),$(divpicfile).show(),$(divpictxt).hide()):($("#btn_url_file").removeClass("input_button_pic").val("Url"),$(divpictxt).show(),$(divpicfile).hide())})}function validateInput(){$(inputhex).on("input",function(){var t=$(inputhex).val();toggleSubmit(/^[0-9A-F]{6}$/i.test(t))}),$(inputUrl).on("input",function(){var t=$(inputUrl).val();toggleSubmit(/(https?:\/\/.*\.(?:png|jpg))/i.test(t))}),$(inputFile).on("change",function(){toggleSubmit(validate_fileupload($(inputFile)[0].files[0].name))})}function toggleSubmit(t){t?$("#submit").show():$("#submit").hide()}function validate_fileupload(t){for(var e=new Array("jpg","png"),i=t.split(".").pop().toLowerCase(),o=0;o<=e.length;o++)if(e[o]==i)return!0;return!1}function submit(){$("#input_submit").click(function(){getVisibleValue()})}function getVisibleValue(){$(inputhex).is(":visible")?getColorScheme($(inputhex).val()):$(inputUrl).is(":visible")?getImageColorsByUrl($(inputUrl).val()):$(inputFile).is(":visible")&&getImageColorsByFile()}function getColorScheme(t){console.log(t),$.ajax({type:"GET",url:"https://cors-anywhere.herokuapp.com/http://www.colr.org/json/search_by_colors?colors="+t,dataType:"json",success:function(t){console.log(t),makeSquares(t)},error:function(){alert("BAD HEX ! ")}})}function getImageColorsByUrl(t){$.ajax({type:"GET",url:"https://api.imagga.com/v1/colors?url="+t,dataType:"json",success:function(t){console.log(t),filterData(t)},beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(API_KEY_PIC+":"+API_SECRET_PIC))},error:function(){alert("BAD URL")}})}function getImageColorsByFile(){postFile($(inputFile)[0].files[0])}function postFile(t){var e=new FormData;e.append("image",t),$.ajax({type:"POST",url:"https://api.imagga.com/v1/content",data:e,contentType:!1,processData:!1,success:function(t){console.log(t),getImageColorsById(t.uploaded[0].id)},beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(API_KEY_PIC+":"+API_SECRET_PIC))},error:function(){alert("BAD URL")}})}function getImageColorsById(t){$.ajax({type:"GET",url:"https://api.imagga.com/v1/colors?content="+t,dataType:"json",success:function(t){console.log(t),filterData(t)},beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(API_KEY_PIC+":"+API_SECRET_PIC))},error:function(){alert("BAD URL")}})}function makeSquares(t){displaySchemes(t)}function displaySchemes(t){$.each(t.schemes,function(t,e){$(".colors").append($("<p/>").addClass("description").text(getTags(e)),$("<div/>").attr("id","square_"+t).addClass("palette")),displayColors(e,t),console.log(e)})}function displayColors(t,e){$.each(t.colors,function(t,i){$("#square_"+e).append($("<div/>").append("<div/>").addClass("color_square").css({"background-color":"#"+i}))})}function getInformationAboutPalette(){$(".palette").click(function(){100===$(this).height()?$(this).css({height:"50px"}):($(".palette").css({height:"50px"}),$(this).css({height:"100px"}))})}function hideForm(){$(".form").hide()}function removeInput(){$("#input_file").val(""),$("#input_text_hex").val(""),$("#input_text_pic").val("")}function filterData(t){var e=t.results[0].info,i=e.background_colors,o=e.foreground_colors;if(console.log(i),console.log(o),i.length>0)var n=makeQuery(i);o.length>0&&(n+=","+makeQuery(o)),getColorScheme(n)}function makeQuery(t){for(var e=t[0].html_code.split("#")[1],i=0;i<2;i++)e+=","+t[i].html_code.split("#")[1];return e}function getTags(t){var e="";return $.each(t.tags,function(t,i){e+=" #"+i.name+"   "}),e}var API_KEY_COL="4oJkrNdyujNYxs9FGSBpw5SvaAeqXEUr2E3WjBhT",API_KEY_PIC="acc_dc8ba00c2d274a1",API_SECRET_PIC="7340b7dea32cc987905db48c575efd11",divpic="#div_pic",divhex="#div_hex_txt",divpicfile="#div_pic_fil",divpictxt="#div_pic_txt",inputhex="#input_text_hex",inputUrl="#input_text_pic",inputFile="#input_file",hexOrPic=!1,urlOrFile=!1;$(document).ready(function(){validateInput(),submit(),toggleButtonHexOrPic(),toggleButtonUrlOrFile()}),$(document).ajaxStart(function(){$(".cssload-wrap").show(),hideForm()}),$(document).ajaxStop(function(){$(".cssload-wrap").hide(),getInformationAboutPalette()});