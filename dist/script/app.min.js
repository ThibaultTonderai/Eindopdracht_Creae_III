"use strict";function toggleButtonHexOrPic(){$("#btn_hex_pic").click(function(){removeInput(),toggleSubmit(!1),(hexOrPic=!hexOrPic)?($("#btn_hex_pic").addClass("input_button_pic").val("Picture"),$(divpic).show(),$(divhex).hide()):($("#btn_hex_pic").removeClass("input_button_pic").val("Hex"),$(divpic).hide(),$(divhex).show())})}function toggleButtonUrlOrFile(){$("#btn_url_file").click(function(){removeInput(),toggleSubmit(!1),(urlOrFile=!urlOrFile)?($("#btn_url_file").addClass("input_button_pic").val("File"),$(divpicfile).show(),$(divpictxt).hide()):($("#btn_url_file").removeClass("input_button_pic").val("Url"),$(divpictxt).show(),$(divpicfile).hide())})}function validateInput(){$(inputhex).on("input",function(){var t=$(inputhex).val(),e=/^[0-9A-F]{6}$/i.test(t);showColorBackground(e),toggleSubmit(e)}),$(inputUrl).on("input",function(){var t=$(inputUrl).val();toggleSubmit(/(https?:\/\/.*\.(?:png|jpg))/i.test(t))}),$(inputFile).on("change",function(){toggleSubmit(validate_fileupload($(inputFile)[0].files[0].name))})}function showColorBackground(t){t?$(inputhex).css({"background-color":"#"+$(inputhex).val()}):$(inputhex).removeAttr("style")}function toggleSubmit(t){t?$("#submit").show():$("#submit").hide()}function validate_fileupload(t){for(var e=new Array("jpg","png"),i=t.split(".").pop().toLowerCase(),o=0;o<=e.length;o++)if(e[o]==i)return!0;return!1}function submit(){$("#input_submit").click(function(){getVisibleValue()})}function getVisibleValue(){$(inputhex).is(":visible")?getColorScheme($(inputhex).val()):$(inputUrl).is(":visible")?getImageColorsByUrl($(inputUrl).val()):$(inputFile).is(":visible")&&getImageColorsByFile()}function getColorScheme(t){console.log(t),$.ajax({type:"GET",url:"https://cors-anywhere.herokuapp.com/http://www.colr.org/json/search_by_colors?colors="+t,dataType:"json",success:function(t){console.log(t),makeSquares(t)},error:function(){alert("BAD HEX ! ")}})}function getImageColorsByUrl(t){$.ajax({type:"GET",url:"https://api.imagga.com/v1/colors?url="+t,dataType:"json",success:function(t){console.log(t),filterData(t)},beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(API_KEY_PIC+":"+API_SECRET_PIC))},error:function(){alert("BAD URL")}})}function getImageColorsByFile(){postFile($(inputFile)[0].files[0])}function postFile(t){var e=new FormData;e.append("image",t),$.ajax({type:"POST",url:"https://api.imagga.com/v1/content",data:e,contentType:!1,processData:!1,success:function(t){console.log(t),getImageColorsById(t.uploaded[0].id)},beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(API_KEY_PIC+":"+API_SECRET_PIC))},error:function(){alert("BAD URL")}})}function getImageColorsById(t){$.ajax({type:"GET",url:"https://api.imagga.com/v1/colors?content="+t,dataType:"json",success:function(t){console.log(t),filterData(t)},beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(API_KEY_PIC+":"+API_SECRET_PIC))},error:function(){alert("BAD URL")}})}function makeSquares(t){displaySchemes(t)}function displaySchemes(t){$.each(t.schemes,function(t,e){$(".colors").append($("<p/>").addClass("description").text(getTags(e)),$("<div/>").addClass("box").append($("<img/>").addClass("shuffle").attr("src","./media/shuffle.png"),$("<div/>").attr("id","square_"+t).addClass("palette"),$("<img/>").addClass("pdf").attr("src","./media/PDF.png"))),displayColors(e,t),console.log(e)})}function displayColors(t,e){$.each(t.colors,function(t,i){$("#square_"+e).append($("<div/>").addClass("color_square").css({"background-color":"#"+i}).append($("<p/>").addClass("color_val").text("Hex: #"+i)))})}function getInformationAboutPalette(){$(".palette").click(function(){100===$(this).height()?$(this).animate({height:50},400,function(){$(this).find("div").find("p").fadeOut("slow","linear"),$(this).next("img").hide(),$(this).prev("img").hide()}):($(".palette").each(function(t,e){100===$(this).height()&&($(this).animate({height:50},400),$(this).next("img").hide(),$(this).prev("img").hide())}),$(".color_val").fadeOut("slow","linear"),$(this).animate({height:100},400,function(){$(this).find("div").find("p").fadeIn("slow","linear"),$(this).next("img").show(),$(this).prev("img").show()}))})}function goBack(){$(".back").show().click(function(){$(".colors").stop().fadeOut("slow","linear",function(){$(".colors").css("display: none"),$(".colors").empty(),$(".form").stop().fadeIn("slow","linear"),$(".back").hide()})})}function hideForm(){$(".form").fadeOut("slow","linear",function(){$(".cssload-wrap").fadeIn("slow","linear")})}function removeInput(){$("#input_file").val(""),$("#input_text_hex").val(""),$("#input_text_pic").val("")}function filterData(t){var e=t.results[0].info,i=e.background_colors,o=e.foreground_colors;if(console.log(i),console.log(o),i.length>0)var n=makeQuery(i);o.length>0&&(n+=","+makeQuery(o)),getColorScheme(n)}function makeQuery(t){for(var e=t[0].html_code.split("#")[1],i=0;i<2;i++)e+=","+t[i].html_code.split("#")[1];return e}function getTags(t){if(0===t.tags.length)return"# palette";var e="";return $.each(t.tags,function(t,i){e+=" #"+i.name+"   "}),e}function clickShuffle(){$(".shuffle").click(function(){"row-reverse"===$(this).next().css("flex-direction")?$(this).next().css({"flex-direction":"row"}):$(this).next().css({"flex-direction":"row-reverse"})})}function clickPdf(){$(".pdf").click(function(){var t=[];$(this).prev("div").children().each(function(e,i){t.push($(i).css("background-color"))}),generatePdf(t)})}function generatePdf(t){var e=new jsPDF;e.setFont("Verdana"),e.text("Color",100,10),e.text("By Thibault Derieuw",85,20);var i=30;t.forEach(function(t){var o=t.split("(")[1].split(")")[0],n=o.split(","),a=n.map(function(t){return 1===(t=parseInt(t).toString(16)).length?"0"+t:t});a="#"+a.join(""),e.setFillColor(parseInt(n[0].trim()),parseInt(n[1].trim()),parseInt(n[2].trim())),e.rect(10,i,20,20,"F"),e.text("RGB Value: "+o,40,i+8),e.text("Hexadecimal value: "+a,40,i+16),i+=30}),e.save("palette.pdf")}var API_KEY_COL="4oJkrNdyujNYxs9FGSBpw5SvaAeqXEUr2E3WjBhT",API_KEY_PIC="acc_dc8ba00c2d274a1",API_SECRET_PIC="7340b7dea32cc987905db48c575efd11",divpic="#div_pic",divhex="#div_hex_txt",divpicfile="#div_pic_fil",divpictxt="#div_pic_txt",inputhex="#input_text_hex",inputUrl="#input_text_pic",inputFile="#input_file",hexOrPic=!1,urlOrFile=!1;$(document).ready(function(){validateInput(),submit(),toggleButtonHexOrPic(),toggleButtonUrlOrFile()}),$(document).ajaxStart(function(){hideForm()}),$(document).ajaxStop(function(){$(".cssload-wrap").hide(),$(".colors").fadeIn("slow","linear"),getInformationAboutPalette(),goBack(),clickPdf(),clickShuffle()});